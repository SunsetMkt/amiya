# 自定义渲染列

## 写 render 函数

可以通过 table 的 render 函数来自定义渲染这一列长什么样子。

```tsx
import React from 'react'
import { AySearchTable, AySearchTableField } from 'amiya'
import { listApi, professionOptions } from '../api'
import { Tag } from 'antd'
import 'antd/dist/antd.min.css'

const fields: Array<AySearchTableField> = [
  {
    title: '英文名',
    key: 'cn',
    search: {},
    table: {
      render: (text: string, record: any, index: number) => {
        const colorMap: any = {
          '阿米娅(近卫)': 'cyan',
          阿米娅: 'orange'
        }
        return <Tag color={colorMap[text]}>{text}</Tag>
      }
    }
  }
]

export default function Demo() {
  return <AySearchTable title="使用 render 函数" searchVisible={false} api={listApi} fields={fields} />
}
```

```js
const fields: Array<AySearchTableField> = [
  {
    title: '英文名',
    key: 'cn',
    table: {
      render: (text: string, record: any, index: number) => {
        const colorMap: any = {
          '阿米娅(近卫)': 'cyan',
          阿米娅: 'orange'
        }
        return <Tag color={colorMap[text]}>{text}</Tag>
      }
    }
  }
]
```

## 已全局注册

下面类型可以全局使用。

### 'html'

```tsx
import React from 'react'
import { AySearchTable, AySearchTableField } from 'amiya'
import 'antd/dist/antd.min.css'

const fields: Array<AySearchTableField> = [
  {
    title: '特性',
    key: 'feature',
    table: {
      renderType: 'html'
    }
  }
]

const data = [
  {
    feature: `攻击造成<span style=\"color:#00B0FF;\">法术伤害</span>`
  },
  {
    feature: `攻击造成<span style=\"color:#00B0FF;\">法术伤害</span><br/>可以使用<span style=\"color:#00B0FF;\">召唤物</span>协助作战`
  }
]

export default function Demo() {
  return <AySearchTable title="渲染 html" data={data} searchVisible={false} pagination={false} fields={fields} />
}
```

```js
const fields: Array<AySearchTableField> = [
  {
    title: '特性',
    key: 'feature',
    table: {
      renderType: 'html'
    }
  }
]
```

### 'datetime'

```tsx
import React from 'react'
import { AySearchTable, AySearchTableField } from 'amiya'
import 'antd/dist/antd.min.css'

const fields: Array<AySearchTableField> = [
  {
    title: '时间',
    key: 'date',
    table: {
      renderType: 'datetime'
    }
  }
]

const data = [
  {
    date: Date.now()
  },
  {
    date: '2021-10-15'
  }
]

export default function Demo() {
  return <AySearchTable title="渲染时间" data={data} searchVisible={false} pagination={false} fields={fields} />
}
```

```js
const fields: Array<AySearchTableField> = [
  {
    title: '时间',
    key: 'date',
    table: {
      renderType: 'datetime'
      // format: 'YYYY-MM-DD' // 可以自定义 format，可参考 moment format
    }
  }
]
```

### 'image'

```tsx
import React from 'react'
import { AySearchTable, AySearchTableField } from 'amiya'
import 'antd/dist/antd.min.css'

const fields: Array<AySearchTableField> = [
  {
    title: '头像',
    key: 'icon',
    table: {
      renderType: 'image'
    }
  }
]

const data = [
  {
    icon: '//prts.wiki/images/5/5b/%E5%A4%B4%E5%83%8F_%E9%98%BF%E7%B1%B3%E5%A8%85%28%E8%BF%91%E5%8D%AB%29.png'
  },
  {
    icon: '//prts.wiki/images/3/36/%E5%A4%B4%E5%83%8F_%E9%98%BF%E7%B1%B3%E5%A8%85.png'
  }
]

export default function Demo() {
  return <AySearchTable title="渲染图片" data={data} searchVisible={false} pagination={false} fields={fields} />
}
```

```js
const fields: Array<AySearchTableField> = [
  {
    title: '头像',
    key: 'icon',
    table: {
      renderType: 'image'
      // 其它属性设置参考 [antd Image Api]: https://ant-design.gitee.io/components/image-cn/#API
      // props: {
      //   width: 200,
      //   height: 200
      // }
    }
  }
]
```

### 'tags'

```tsx
import React from 'react'
import { AySearchTable, AySearchTableField } from 'amiya'
import 'antd/dist/antd.min.css'

const fields: Array<AySearchTableField> = [
  {
    title: '标签',
    key: 'tags',
    table: {
      renderType: 'tags',
      colorMap: {
        红色: 'red',
        绿色: 'green',
        蓝色: 'blue',
        黄色: 'yellow'
      }
    }
  }
]

const data = [
  {
    tags: ['红色', '绿色', '未定义颜色']
  },
  {
    tags: ['蓝色', '黄色']
  }
]

export default function Demo() {
  return <AySearchTable title="渲染标签" data={data} searchVisible={false} pagination={false} fields={fields} />
}
```

```js
// tags 需要是数组
const data = [
  {
    tags: ['红色', '绿色', '未定义颜色']
  },
  {
    tags: ['蓝色', '黄色']
  }
]

const fields: Array<AySearchTableField> = [
  {
    title: '标签',
    key: 'tags',
    table: {
      renderType: 'tags',
      // 需要设置此项目
      colorMap: {
        红色: 'red',
        绿色: 'green',
        蓝色: 'blue',
        黄色: 'yellow'
      }
    }
  }
]
```

上面的 `renderType` 类型还不满足？那你需要自己注册 [registerTableRender](../全局方法/register-table-render)。
